!function(e){"use strict";e.Promise?(e.promise=function(e){return new Promise(e)},e.promise.all=function(e){return Promise.all(e)},e.promise.race=function(e){return Promise.race(e)}):(e.promise=function(n){var t,r="pending",o="fulfilled",i="rejected",a=r,s=[],u=function(e){return function(n){var o;if(a===r&&(t=n,a=e,s))for(o=0;o<s.length;o++)d(s[o])}},c=u(o),l=u(i),f=function(e){return e&&"function"==typeof e.then},d=function(e){if(a===r)s.push(e);else{var n,i,u=a===o,c=!1;u?n=e.onResolved:(n=e.onRejected,c=!n);try{i=n?n(t):t}catch(l){i=l,c=!0}f(i)?i.then(function(n){return e.resolve(n),n},function(n){return e.reject(n),n}):c?e.reject(i):e.resolve(i)}},p=function(n,t){return e.promise(function(e,r){window.setTimeout(function(){d({onResolved:n||null,onRejected:t||null,resolve:e,reject:r})},1)})},h=function(e){return p(null,e)};try{n(c,l)}catch(g){l(g)}return{"catch":h,then:p}},e.promise.all=function(n){return e.promise(function(e,t){var r=0,o=[],i=!1,a=n.length;n.forEach(function(n,s){o[s]=void 0,n.then(function(n){i||(r++,o[s]=n,r===a&&e(o))},function(e){r++,t(e),i=!0})})})},e.promise.race=function(n){return e.promise(function(e,t){n.forEach(function(n){n.then(function(n){e(n)},function(e){t(e)})})})})}(window);var GeotabApi=function(e,n,t){"use strict";var r,o,i,a="geotabJSONP",s=[],u={rememberMe:!0,debug:!1,jsonp:!1,timeout:0},c=function(){if(u.debug){var e=[new Date];e.push.apply(e,arguments),console.log.apply(console,e)}},l=function(e,n){var t;e&&e.name&&e.message?t=e.name+": "+e.message:(e.target||e instanceof XMLHttpRequest&&0===e.status)&&(t="Network Error: Couldn't connect to the server. Please check your network connection and try again."),u.debug&&console.error(t,e),n&&n(t||"Error",e)},f=function(e){var n=o.replace(/\S*:\/\//,"").replace(/\/$/,"");return"https://"+n+"/apiv1"+(e?"/"+e:"")},d=function(e){var n=document.getElementById(e);if(n){n.parentNode.removeChild(n);for(var t in n)n.hasOwnProperty(t)&&delete n[t]}delete window[a][e]},p=function(e,n,t,r){var o,i="json"+(100*Math.random()).toString().replace(/\./g,""),s=function(){n=n||{};var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push.apply(e,["&",encodeURIComponent(t),"=",encodeURIComponent(JSON.stringify(n[t]))]);return e.join("")};return window[a][i]=function(n){o&&(clearTimeout(o),o=null);try{if(n&&n.error)c(e,"ERROR",n.error),l(n.error,r);else{var a=n.result;c(e,"SUCCESS",{result:a}),t&&t(a)}}finally{d(i)}},document.getElementsByTagName("body")[0].appendChild(function(){var n=document.createElement("script");return n.type="text/javascript",n.id=i,n.async="async",n.src=f(e)+"?JSONP="+a+"."+i+s(),n.onerror=function(n){try{c("CallJSONP",e,"ERROR",n),l(n,r)}finally{d(i)}},n}()),o&&clearTimeout(o),u.timeout&&"Authenticate"!==e&&(o=setTimeout(function(){window[a].hasOwnProperty(i)&&(window[a][i]({error:{name:"JSONPTimeout",message:"Could not complete the JSONP request in a timely manner ("+u.timeout+"s)",target:document.getElementById(i)}}),window[a][i]=function(){d(i)})},1e3*u.timeout)),{abort:function(){d(i),errorCallback&&errorCallback("Cancelled",{})}}},h=function(e,n,t,r){var o=new XMLHttpRequest;o.open("POST",f(),!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.addEventListener("abort",function(e){r&&r("Cancelled",e)}),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var n,i,a;try{n=JSON.parse(o.responseText),n&&n.error?(i=n.error,c(e,"ERROR",i),l(i,r)):(a=n.result,c(e,"SUCCESS",{result:a}),t(a))}catch(s){l(s,r)}}else c(e,"ERROR",o),l(o,r)};var i;try{i=JSON.stringify({method:e||"",params:n})}catch(a){return void l(a,r)}return u.timeout&&(o.timeout=1e3*u.timeout),o.send("JSON-RPC="+encodeURIComponent(i)),{abort:function(){o.abort()}}},g=function(e,n,t,r){return u.jsonp?p(e,n,t,r):h(e,n,t,r)},m=function(e,n,t,a,s,c){return o=e,g("Authenticate",{database:n,userName:t,password:a},function(e){e.path&&"ThisServer"!==e.path&&(o="https://"+e.path+"/"),r=e.credentials,u.rememberMe&&i.set(r,o),s&&s()},c)},v=function(n){e(function(e,t,r,o,i,a){return m(e,t,r,o,function(){n&&n(),a&&a(),s.forEach(function(e){y.apply(this,e)}),s=[]},i)})},y=function(e,n,t,a){var c=function(){s.push([e,n,t,a]);var c=i.get();c&&u.rememberMe?(r=c.credentials,o=c.server,s.forEach(function(e){y.apply(this,e)}),s=[]):v()};return r?(n.credentials=r,g(e,n,t,function(n,t){var r=t.errors;r&&r[0]&&"InvalidUserException"===r[0].name&&"Authenticate"!==e?(i.clear(),c()):a&&a(n,t)})):(c(),{abort:function(){}})},b=function(e,n,t){var r=e.map(function(e){var n=e[1];return{method:e[0],params:n}});return y("ExecuteMultiCall",{calls:r},n,t)},w=function(e,n){var t=i.get();return!n&&t&&u.rememberMe?void(e&&e(t.credentials,t.server)):void v(function(){e&&e(r,o)})},E=function(){r=null,i.clear(),v()};if(n)for(var S in n)n.hasOwnProperty(S)&&(u[S]=n[S]);window[a]={};var x={CREDENTIALS_KEY:"geotabAPI_credentials",SERVER_KEY:"geotabAPI_server",get:function(){var e=localStorage.getItem(this.CREDENTIALS_KEY),n=localStorage.getItem(this.SERVER_KEY),t=!1;if(e&&n)try{t={credentials:JSON.parse(e),server:n}}catch(r){return!1}return t},set:function(e,n){localStorage.setItem(this.CREDENTIALS_KEY,JSON.stringify(e)),localStorage.setItem(this.SERVER_KEY,n)},clear:function(){localStorage.removeItem(this.CREDENTIALS_KEY),localStorage.removeItem(this.SERVER_KEY)}};return i=t||x,{call:y,multiCall:b,forget:E,getSession:w}};"undefined"!=typeof define&&define.amd&&define(function(){"use strict";return GeotabApi}),function(){"use strict";var e=window.GeotabApi,n=window.promise,t={},r=function(){var e;t&&t.addin&&t.addin.Promise||(e=function(e){return n(e)},Object.keys(n).forEach(function(t){e[t]=n[t]}),e.hash=!0,Object.freeze(e),window.geotab={addin:{Promise:e}})},o=function(e,n){return function(t){e&&e(t),n(t)}};e&&n&&(r(),window.GeotabApi=function(t,r,i){var a=e(t,r,i);return{call:function(e,t,r,i){return n(function(n,s){a.call(e,t,o(r,n),o(i,s))})},multiCall:function(e,n,t){return window.promise(function(r,i){a.multiCall(e,o(n,r),o(t,i))})},forget:a.forget,getSession:a.getSession}})}();var GeotabState=function(e,n,t){"use strict";var r=function(){return(location.hash||"").substring(1)},o=function(e){return e},i=function(e){return Object.keys(t).length}(t),a=function(e){var n=null!==e.getAttribute("data-ignore"),t="textarea"===e.tagName.toLowerCase();return n||t},s=["placeholder","title"],u=function(e){var n,t,r=e.childNodes;for(n=0;n<r.length;n++)t=r[n],3===t.nodeType?t.nodeValue=c(t.nodeValue):1!==t.nodeType||a(t)||u(t),t.getAttribute&&s.forEach(function(e){var n=t.getAttribute(e);n&&t.setAttribute(e,c(n))})},c=function(e){var n;if("string"==typeof e){if(n=e.trim())return"undefined"!=typeof t[n]?t[n]:(console.log("Missing translation: "+n),n)}else u(e);return e};return{translate:i?c:o,getState:function(){return e.decode(r()).settings},setState:function(n){location.hash="#"+e.encode({page:e.decode(r()).page,settings:n})},gotoPage:function(t,r){n.getSession(function(n,o){var i="https://"+o+"/"+n.database+"/#"+e.encode({page:t||"",settings:r||null});window.open(i,"_blank")})},hasAccessToPage:function(){return!0},getGroupFilter:function(){return[{id:"GroupCompanyId"}]}}};"undefined"==typeof rison&&(window.rison={}),rison.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var e=[],n=0;16>n;n++)for(var t=0;16>t;t++)if(n+t!=0){var r=String.fromCharCode(16*n+t);/\w|[-_.\/~]/.test(r)||e.push("\\u00"+n.toString(16)+t.toString(16))}rison.not_idchar=e.join("")}(),rison.not_idchar=" '!:(),*@$",rison.not_idstart="-0123456789",function(){var e="[^"+rison.not_idstart+rison.not_idchar+"][^"+rison.not_idchar+"]*";rison.id_ok=new RegExp("^"+e+"$"),rison.next_id=new RegExp(e,"g")}(),rison.quote=function(e){return/^[-A-Za-z0-9~!*()_.',:@$\/]*$/.test(e)?e:encodeURIComponent(e).replace("%2C",",","g").replace("%3A",":","g").replace("%40","@","g").replace("%24","$","g").replace("%2F","/","g").replace("%20","+","g")},function(){var e={"'":!0,"!":!0},n={array:function(e){var t,r,o,i,a=["!("],s=e.length;for(o=0;s>o;o+=1)i=e[o],r=n[typeof i],r&&(i=r(i),"string"==typeof i&&(t&&(a[a.length]=","),a[a.length]=i,t=!0));return a[a.length]=")",a.join("")},"boolean":function(e){return e?"!t":"!f"},"null":function(e){return"!n"},number:function(e){return isFinite(e)?String(e).replace(/\+/,""):"!n"},object:function(e){if(e){if(e instanceof Array)return n.array(e);if("object"==typeof e.__prototype__&&"undefined"!=typeof e.__prototype__.encode_rison)return e.encode_rison();var t,r,o,i,a,s=["("],u=[];for(o in e)u[u.length]=o;for(u.sort(),a=0;a<u.length;a++)o=u[a],i=e[o],r=n[typeof i],r&&(i=r(i),"string"==typeof i&&(t&&(s[s.length]=","),s.push(n.string(o),":",i),t=!0));return s[s.length]=")",s.join("")}return"!n"},string:function(n){return""==n?"''":rison.id_ok.test(n)?n:(n=n.replace(/(['!])/g,function(n,t){return e[t]?"!"+t:t}),"'"+n+"'")},undefined:function(e){throw new Error("rison can't encode the undefined value")}};rison.encode=function(e){return n[typeof e](e)},rison.encode_object=function(e){if("object"!=typeof e||null===e||e instanceof Array)throw new Error("rison.encode_object expects an object argument");var t=n[typeof e](e);return t.substring(1,t.length-1)},rison.encode_array=function(e){if(!(e instanceof Array))throw new Error("rison.encode_array expects an array argument");var t=n[typeof e](e);return t.substring(2,t.length-1)},rison.encode_uri=function(e){return rison.quote(n[typeof e](e))}}(),rison.decode=function(e){var n=function(e){throw Error("rison decoder error: "+e)},t=new rison.parser(n);return t.parse(e)},rison.decode_object=function(e){return rison.decode("("+e+")")},rison.decode_array=function(e){return rison.decode("!("+e+")")},rison.parser=function(e){this.errorHandler=e},rison.parser.WHITESPACE="",rison.parser.prototype.setOptions=function(e){e.errorHandler&&(this.errorHandler=e.errorHandler)},rison.parser.prototype.parse=function(e){this.string=e,this.index=0,this.message=null;var n=this.readValue();return!this.message&&this.next()&&(n=this.error("unable to parse string as rison: '"+rison.encode(e)+"'")),this.message&&this.errorHandler&&this.errorHandler(this.message,this.index),n},rison.parser.prototype.error=function(e){return"undefined"!=typeof console&&console.log("rison parser error: ",e),void(this.message=e)},rison.parser.prototype.readValue=function(){var e=this.next(),n=e&&this.table[e];if(n)return n.apply(this);var t=this.string,r=this.index-1;rison.next_id.lastIndex=r;var o=rison.next_id.exec(t);if(o.length>0){var i=o[0];return this.index=r+i.length,i}return e?this.error("invalid character: '"+e+"'"):this.error("empty expression")},rison.parser.parse_array=function(e){for(var n,t=[];")"!=(n=e.next());){if(!n)return e.error("unmatched '!('");if(t.length)","!=n&&e.error("missing ','");else{if(","==n)return e.error("extra ','");--e.index}var r=e.readValue();if("undefined"==typeof r)return void 0;t.push(r)}return t},rison.parser.bangs={t:!0,f:!1,n:null,"(":rison.parser.parse_array},rison.parser.prototype.table={"!":function(){var e=this.string,n=e.charAt(this.index++);if(!n)return this.error('"!" at end of input');var t=rison.parser.bangs[n];return"function"==typeof t?t.call(null,this):"undefined"==typeof t?this.error('unknown literal: "!'+n+'"'):t},"(":function(){for(var e,n={},t=0;")"!=(e=this.next());){if(t)","!=e&&this.error("missing ','");else{if(","==e)return this.error("extra ','");--this.index}var r=this.readValue();if("undefined"==typeof r)return void 0;if(":"!=this.next())return this.error("missing ':'");var o=this.readValue();if("undefined"==typeof o)return void 0;n[r]=o,t++}return n},"'":function(){for(var e,n=this.string,t=this.index,r=t,o=[];"'"!=(e=n.charAt(t++));){if(!e)return this.error('unmatched "\'"');if("!"==e){if(t-1>r&&o.push(n.slice(r,t-1)),e=n.charAt(t++),!("!'".indexOf(e)>=0))return this.error('invalid string escape: "!'+e+'"');o.push(e),r=t}}return t-1>r&&o.push(n.slice(r,t-1)),this.index=t,1==o.length?o[0]:o.join("")},"-":function(){var e=this.string,n=this.index,t=n-1,r="int",o="-",i={"int+.":"frac","int+e":"exp","frac+e":"exp"};do{var a=e.charAt(n++);if(!a)break;a>="0"&&"9">=a||(o.indexOf(a)>=0?o="":(r=i[r+"+"+a.toLowerCase()],"exp"==r&&(o="-")))}while(r);return this.index=--n,e=e.slice(t,n),"-"==e?this.error("invalid number"):Number(e)}},function(e){for(var n=0;9>=n;n++)e[String(n)]=e["-"]}(rison.parser.prototype.table),rison.parser.prototype.next=function(){var e=this.string,n=this.index;do{if(n==e.length)return void 0;var t=e.charAt(n++)}while(rison.parser.WHITESPACE.indexOf(t)>=0);return this.index=n,t},function(e){var n=/<body[^>]*>([\s\S]*)<\/body[\s]*>/im,t=e.document.head,r=/<script[^>]*>([\s\S]*?)<\/script[\s]*>/gim,o=/<title[^>]*>([^<]*)<\/title[\s]*>/gim,i=/<link[^>]*>/gim,a=/<img[^>]*>/gim,s="async"in document.createElement("SCRIPT"),u="text/javascript",c="translations/",l="/addins/",f="/pages/",d={docs:!0},p=function(e){return-1===e.indexOf("://")},h=function(e,n){return function(t){var r="/"===t[0]?t.substring(1):t;return p(r)?n+e+"/"+r:r}},g=function(e,n){return V(location.protocol+"//"+location.host+n+c+e+".json").then(function(e){var n={};try{n=JSON.parse(e)}catch(t){}return n},function(){return{}})},m=function(e,n,r,o){var i,a=document.createElement("SCRIPT");return e.src?(a.async=!1,a.src=n(e.src),a.type=e.type||u,a.onerror=o,a.onload=r,e.id&&(a.id=e.id),t.appendChild(a)):(a.setAttribute("type",e.type||u),i=e.script,a.text=i,e.id&&(a.id=e.id),t.appendChild(a),setTimeout(r,1)),a},v=function(e,n,t,r){var o,i=e.length,a=function(){this&&this!==window&&(this.onload=null,this.onerror=null),i--,i||t()},s=function(e){var n=new Error("Add-Ins script '"+(e.target?e.target.src:e)+"' could not be loaded");n.isSevere=!1,r(n)};for(o=0;o<e.length;o++)m(e[o],n,a,s)},y=function(e,n,t,r){var o=e.slice(0),i=function(){this&&this!==window&&(this.onload=null,this.onerror=null),o.length?m(o.shift(),n,i,a):t()},a=function(e){var n=new Error("Add-Ins script '"+(e.target?e.target.src:e)+"' could not be loaded");n.isSevere=!1,r(n)};m(o.shift(),n,i,a)},b=s?v:y,w=function(e,n){for(var t,r,o;t=a.exec(e);)r=L(C,t[0],A),r&&(o=t[0].replace(A,"src='"+n(r)+"'"),e=e.replace(t[0],o));return e},E=function(){return Array.prototype.reduce.call(document.getElementsByTagName("LINK"),function(e,n){return e[(n.getAttribute("href")||"").split("?")[0]||""]=!0,e},{})},S=function(e,n){for(var t,r,o,a=[],s=E();t=i.exec(e);)r=t[0].match(/["']\S*(\.css|\.less)/gi),r&&(o=r[0].replace('"',""),o=n&&-1===o.indexOf("//")?n+o:o,s[o]||a.push(o));return a},x=function(e,n){e.forEach(function(e){var r=document.createElement("LINK");r.href=n(e),r.rel="stylesheet",t.appendChild(r)})},C=/<img[^>]*src[\s]?=[\s]?['"]\S*['"][^>]*>/i,R=/<script[^>]*src[\s]?=[\s]?['"]\S*['"][^>]*>/i,A=/src[\s]?=[\s]?['"]\S*['"]/i,_=/<script[^>]*type[\s]?=[\s]?['"]\S*['"][^>]*>/i,I=/type[\s]?=[\s]?['"]\S*['"]/i,O=/<script[^>]*id[\s]?=[\s]?['"]\S*['"][^>]*>/i,j=/id[\s]?=[\s]?['"]\S*['"]/i,N=/['"]/gi,T=/['"]$/gi,P=function(){var e=document.createElement("DIV");return function(n){var t,r=[];if("string"==typeof n)for(e.innerHTML=n,t=e.childNodes.length;t;)r.push(e.removeChild(e.childNodes[0])),t--;return r}}(),L=function(e,n,t){var r,o=(n.match(e)||[""])[0];return o&&(o=n.match(t)[0],r=o.search(N)+1,o=o.substring(r,o.search(T))),o},k=function(e){for(var n,t,o=[];n=r.exec(e);)t=n[0]||"",n=n[1]||"",o.push({type:L(_,t,I),src:L(R,t,A),id:L(O,t,j),script:n});return o},H=function(e,t){var i={scripts:[],links:[],bodyContent:"",title:"",translation:null,content:null,error:null},a=function(){var a,s;n.lastIndex=0,r.lastIndex=0,o.lastIndex=0,a=n.exec(e),a?(a=a[1],i.scripts=k(e),i.bodyContent=w(a.replace(r,""),t),s=o.exec(e),i.title=s?s[1]:"",i.links=S(e),i.content=P(i.bodyContent)):i.error=new Error("Can't parse content")};try{a()}catch(s){i.error=s}return i},G=function(e,n){return window.promise(function(t,r){var o,i=H(e,n);i&&!i.error?(o=i.scripts,x(i.links,n),o&&o.length?b(o,n,function(){t(i)},r):t(i)):r(i.error)})},D=function(){return("undefined"!=typeof window&&window.XMLHttpRequest?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")})()},M=function(e,n,t){var r=d[e]?f:l,o=location.protocol+"//"+location.host+r+e,i=V(o).then(function(n){return G(n,h(e,r))}),a=g(n,h(e,r)(""));return window.promise.all([i,a]).then(function(e){var n=e[0];return n.translation=e[1],n})},V=function(e){return window.promise(function(n,t){var r=D(),o=function(n){t(new Error("Can't load: "+e)),r.onreadystatechange=null,r.onerror=null};r.open("GET",e),r.setRequestHeader("Content-Type","text/plain"),r.onreadystatechange=function(){4==r.readyState&&(200===r.status?n(r.responseText):o(),r.onreadystatechange=null,r.onerror=null)},r.onerror=o,r.send(null)})};e.loader={load:M,loadHtml:function(e){return V(e).then(function(e){return P(e||"")})},abort:function(){}}}(window),function(e){var n,t="docs",r="dev-geotab-lang",o=function(e){return document.getElementById(e)},i=function(){var e=function(e){for(var n in e)return!1;return!0},n=function(){var e,t,r,o,i,a=arguments.length,s=!1,u=function(e){return"[object Object]"===(e||"").toString()},c=arguments[0],l=1;for("boolean"==typeof c&&(s=c,c=arguments[1],l++);l!==a;){for(e=arguments[l],t=Object.keys(e||{}),i=0;i<t.length;i++)r=e[t[i]],s&&(u(r)||Array.isArray(r))?(o=c[t[i]],o=c[t[i]]=u(o)||Array.isArray(o)?o:Array.isArray(r)?[]:{},n(s,o,r)):c[t[i]]=e[t[i]];l++}return c},t=function(t){var r="",o="",i=n(!0,{},t);return i.page&&(r=i.page),i.settings&&!e(i.settings)&&(o=rison.encode(i.settings),r+=(""!=r?",":"")+o.substr(1,o.length-2)),r},r=function(e){var n=decodeURIComponent(e),t={page:"",settings:{}},r=function(){var e=n.split(","),r="";return-1==e[0].indexOf(":")?(t.page=e[0],r=n.substring(e[0].length+1,n.length)):r=n,t.settings=rison.decode("("+r+")"),t};try{return r()}catch(o){throw new Error("Invalid URL")}};return{decode:r,encode:t}}(),a=GeotabApi(function(e){GeotabLoginDialog.show(),GeotabLoginDialog.attach("login",function(n){GeotabLoginDialog.toggleError(),e(n.server,n.db,n.email,n.pass,function(){GeotabLoginDialog.toggleError(!0)},function(){GeotabLoginDialog.hide()})})},{timeout:18e4}),s=function(){var e={},n=document.getElementById("devContent"),t=function(){var e,t,r,o=function(){},s=[],u=!1,c=function(e){return function(){var n=Array.prototype.slice.call(arguments),o=r&&r[e]||function(){};n.unshift(t),n.unshift(a),u&&o.apply(r,n)}},l="";return e={connect:function(e,n){s=e.content,l=e.title,t=GeotabState(i,a,e.translation),o=n},isRealPage:function(){return u},initialize:function(e){u||(r=o(a,t),u=!0,c("initialize")(e))},focus:c("focus"),blur:c("blur"),insert:function(){var e=document.getElementsByTagName("title")[0];e&&(e.text=l),s.forEach(function(e){n.appendChild(e)}),s.length=0},remove:function(){var e=document.getElementsByTagName("title")[0],t=n.childNodes;for(l=e?e.text:"";t.length;)s.push(t[0].parentNode.removeChild(t[0]))}}};return{get:function(n){return e[n]||(e[n]=t()),e[n]},clear:function(){Object.keys(e).forEach(function(n){e[n].blur(),e[n].remove(),delete e[n]})}}}(),u=function(){var o=i.decode((location.hash||"").substring(1)).page||t,a=localStorage.getItem(r)||"en",u=s.get(o);u!==n&&(n&&(n.blur(),n.remove(),n=null),u.isRealPage()?(n=u,u.insert(),u.focus()):e.loader.load(o,a).then(function(e){u.connect(e,c.getAddinsController()),n=u,u.insert(),u.initialize(function(){u.focus()})},function(e){console.log("Error during loading Add-In: "+e.message)}))},c=function(){return e.geotab=e.geotab||{addin:{}},{getAddinsController:function(){var e=Object.keys(geotab.addin).filter(function(e){return!geotab.addin[e].hash})[0];if(!e)throw new Error("This Add-In doesn't have main function");return geotab.addin[e].hash=!0,geotab.addin[e]}}}(),l=o("languages");e.addEventListener("hashchange",u,!1),u(),l.value=localStorage.getItem(r)||"en",l.addEventListener("change",function(){localStorage.setItem(r,this.value),s.clear(),u()},!1),o("logout").addEventListener("click",function(){a.forget(),GeotabLoginDialog.clear(),s.clear(),u()},!1)}(window);var GeotabLoginDialog=function(){var e,n,t=function(){var e=document.createElement("DIV");return e.className="pane shield",e}(),r={error:null,server:null,email:null,db:null,pass:null},o={},i=function(e,t){(o[e]||[]).forEach(function(e){return e.call(n,t)})},a=!1;return window.loader.loadHtml("templates/login.html").then(function(t){var o=function(n){return e.querySelector(n)};e=t[0],r.error=o("#loginError"),r.server=o("#server"),r.email=o("#user"),r.db=o("#database"),r.pass=o("#password"),e.querySelector("#loginButton").addEventListener("click",function(){i("login",{server:r.server.value,email:r.email.value,db:r.db.value,pass:r.pass.value})},!1),a&&n.show()}),n={attach:function(e,n){o[e]||(o[e]=[]),o[e].push(n)},detach:function(e,n){o[e]=(o[e]||[]).filter(function(e){return e!==n})},toggleError:function(e){r.error&&(r.error.style.display=e?"block":"none")},show:function(){e?(document.body.appendChild(e),document.body.appendChild(t)):a=!0},hide:function(){e?(e=document.body.removeChild(e),t=document.body.removeChild(t),r.error.style.display="none"):a=!1},clear:function(){Object.keys(r).forEach(function(e){r[e].value=""}),r.error.style.display="none"}}}();